<!DOCTYPE html>
<html lang="mr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="рдХрд┐рд╕рд╛рди рд╕рд╣рд╛рдпреНрдп - Check-in History">
    <title>рдорд╛рдЭрд╛ рдЗрддрд┐рд╣рд╛рд╕ | рдХрд┐рд╕рд╛рди рд╕рд╣рд╛рдпреНрдп</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Noto+Sans+Devanagari:wght@400;500;600;700&family=Poppins:wght@400;500;600;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="history.css">
</head>

<body>
    <!-- Header -->
    <header class="main-header">
        <div class="container">
            <div class="logo">
                <a href="index.html" style="text-decoration: none; display: flex; align-items: center; gap: 0.5rem;">
                    <span class="logo-icon">ЁЯМ╛</span>
                    <div class="logo-text">
                        <h1 data-i18n="appName">рдХрд┐рд╕рд╛рди рд╕рд╣рд╛рдпреНрдп</h1>
                        <p data-i18n="appTagline">Farmer Mental Health Support</p>
                    </div>
                </a>
            </div>
            <nav class="nav-links">
                <a href="index.html" class="nav-link" data-i18n="navCheckin">Check-in</a>
                <a href="history.html" class="nav-link active" data-i18n="navHistory">History</a>
                <a href="index.html#helpline-section" class="nav-link" data-i18n="navHelplines">Helplines</a>
            </nav>

            <!-- Language Selector -->
            <div class="language-selector-wrapper">
                <span class="lang-icon">ЁЯМР</span>
                <select id="language-selector" class="language-selector" onchange="changeLanguage(this.value)">
                    <option value="mr">рдорд░рд╛рдареА</option>
                    <option value="hi">рд╣рд┐рдВрджреА</option>
                    <option value="en">English</option>
                    <option value="kn">р▓Хр▓ир│Нр▓ир▓б</option>
                    <option value="te">р░др▒Жр░▓р▒Бр░Чр▒Б</option>
                    <option value="ta">родрооро┐ро┤рпН</option>
                    <option value="gu">ркЧрлБркЬрк░рк╛ркдрлА</option>
                    <option value="bn">ржмрж╛ржВрж▓рж╛</option>
                </select>
            </div>

            <!-- Auth Buttons -->
            <div class="auth-buttons">
                <a href="login.html" id="login-btn" class="nav-link login-link">
                    <span>ЁЯФР</span>
                    <span data-i18n="login">рд▓реЙрдЧрд┐рди</span>
                </a>

                <div class="user-menu hidden" id="user-menu">
                    <div class="user-info">
                        <span class="user-avatar">ЁЯСитАНЁЯМ╛</span>
                        <span class="user-name" id="user-name">рд╢реЗрддрдХрд░реА</span>
                    </div>
                    <button class="logout-btn" onclick="handleLogout()" data-i18n-title="logout">
                        <span>ЁЯЪк</span>
                        <span class="logout-text" data-i18n="logout">рдмрд╛рд╣реЗрд░ рдкрдбрд╛</span>
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="history-page">
        <div class="container">
            <!-- Login Required Message (Hidden by default) -->
            <div id="login-required" class="no-history" style="display: none;">
                <div class="no-history-icon">ЁЯФТ</div>
                <h3>рд▓реЙрдЧрд┐рди рдЖрд╡рд╢реНрдпрдХ рдЖрд╣реЗ</h3>
                <p>рддреБрдордЪрд╛ рдЗрддрд┐рд╣рд╛рд╕ рдкрд╛рд╣рдгреНрдпрд╛рд╕рд╛рдареА рдХреГрдкрдпрд╛ рд▓реЙрдЧрд┐рди рдХрд░рд╛</p>
                <a href="login.html" class="cta-button">
                    <span>рд▓реЙрдЧрд┐рди рдХрд░рд╛</span>
                    <span>тЖТ</span>
                </a>
            </div>

            <!-- Page Header -->
            <div class="page-header" id="page-header">
                <h1>рдорд╛рдЭрд╛ рддрдкрд╛рд╕рдгреА рдЗрддрд┐рд╣рд╛рд╕ <span>My Check-in History</span></h1>
                <p>рддреБрдордЪреНрдпрд╛ рд╕рд░реНрд╡ рд╕рд╛рдкреНрддрд╛рд╣рд┐рдХ рддрдкрд╛рд╕рдгреНрдпрд╛рдВрдЪрд╛ рдЖрдврд╛рд╡рд╛</p>
            </div>

            <!-- Stats Summary -->
            <div class="stats-grid" id="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon">ЁЯУК</div>
                    <div class="stat-value" id="total-checkins">0</div>
                    <div class="stat-label">рдПрдХреВрдг рддрдкрд╛рд╕рдгреНрдпрд╛</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">ЁЯУИ</div>
                    <div class="stat-value" id="avg-hope">-</div>
                    <div class="stat-label">рд╕рд░рд╛рд╕рд░реА рдЖрд╢рд╛ рдкрд╛рддрд│реА</div>
                </div>
                <div class="stat-card risk-card" id="last-risk-card">
                    <div class="stat-icon">тЪая╕П</div>
                    <div class="stat-value" id="last-risk">-</div>
                    <div class="stat-label">рд╢реЗрд╡рдЯрдЪреА рдЬреЛрдЦреАрдо рдкрд╛рддрд│реА</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">ЁЯУЕ</div>
                    <div class="stat-value" id="last-checkin">-</div>
                    <div class="stat-label">рд╢реЗрд╡рдЯрдЪреА рддрдкрд╛рд╕рдгреА</div>
                </div>
            </div>

            <!-- Trend Chart -->
            <div class="chart-section">
                <h2>рдЖрд╢рд╛ рдкрд╛рддрд│реА рдЯреНрд░реЗрдВрдб <span>Hope Level Trend</span></h2>
                <div class="chart-container" id="chart-container">
                    <canvas id="hope-chart"></canvas>
                </div>
                <div class="no-data-message" id="no-chart-data" style="display: none;">
                    <span>ЁЯУК</span>
                    <p>рдЯреНрд░реЗрдВрдб рдкрд╛рд╣рдгреНрдпрд╛рд╕рд╛рдареА рдХрд┐рдорд╛рди 2 рддрдкрд╛рд╕рдгреНрдпрд╛ рдЖрд╡рд╢реНрдпрдХ</p>
                </div>
            </div>

            <!-- History List -->
            <div class="history-section">
                <div class="section-header-row">
                    <h2>рддрдкрд╛рд╕рдгреА рдЗрддрд┐рд╣рд╛рд╕ <span>Check-in Records</span></h2>
                    <div class="filter-controls">
                        <select id="risk-filter">
                            <option value="all">рд╕рд░реНрд╡</option>
                            <option value="LOW">рдХрдореА рдЬреЛрдЦреАрдо</option>
                            <option value="MODERATE">рдордзреНрдпрдо рдЬреЛрдЦреАрдо</option>
                            <option value="HIGH">рдЬрд╛рд╕реНрдд рдЬреЛрдЦреАрдо</option>
                            <option value="CRITICAL">рдЕрддреНрдпрдВрдд рдЬрд╛рд╕реНрдд</option>
                        </select>
                    </div>
                </div>

                <div class="history-list" id="history-list">
                    <!-- Dynamic content -->
                </div>

                <div class="no-history" id="no-history" style="display: none;">
                    <div class="no-history-icon">ЁЯУЛ</div>
                    <h3>рдЕрдЬреВрди рдХреЛрдгрддреАрд╣реА рддрдкрд╛рд╕рдгреА рдирд╛рд╣реА</h3>
                    <p>рддреБрдордЪреА рдкрд╣рд┐рд▓реА рд╕рд╛рдкреНрддрд╛рд╣рд┐рдХ рддрдкрд╛рд╕рдгреА рдХрд░рд╛</p>
                    <a href="index.html#form-section" class="cta-button">
                        <span>рддрдкрд╛рд╕рдгреА рдХрд░рд╛</span>
                        <span>тЖТ</span>
                    </a>
                </div>
            </div>

            <!-- Export Options -->
            <div class="export-section" id="export-section">
                <h3>рдбреЗрдЯрд╛ рдирд┐рд░реНрдпрд╛рдд рдХрд░рд╛</h3>
                <div class="export-buttons">
                    <button class="export-btn" onclick="exportToCSV()">
                        <span>ЁЯУД</span> CSV рдбрд╛рдЙрдирд▓реЛрдб
                    </button>
                    <button class="export-btn" onclick="printHistory()">
                        <span>ЁЯЦия╕П</span> рдкреНрд░рд┐рдВрдЯ рдХрд░рд╛
                    </button>
                    <button class="export-btn danger" onclick="clearHistory()">
                        <span>ЁЯЧСя╕П</span> рдЗрддрд┐рд╣рд╛рд╕ рд╣рдЯрд╡рд╛
                    </button>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="main-footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-logo">
                    <span>ЁЯМ╛</span>
                    <span>рдХрд┐рд╕рд╛рди рд╕рд╣рд╛рдпреНрдп</span>
                </div>
                <p>рд╢реЗрддрдХрд░реА рдмрдВрдзреВ-рднрдЧрд┐рдиреАрдВрдЪреНрдпрд╛ рд╕реЗрд╡реЗрдд</p>
            </div>
        </div>
    </footer>

    <!-- Detail Modal -->
    <div class="modal-overlay" id="detail-modal">
        <div class="modal-content">
            <button class="modal-close" onclick="closeModal()">&times;</button>
            <div class="modal-body" id="modal-body">
                <!-- Dynamic content -->
            </div>
        </div>
    </div>

    <script src="lang.js"></script>
    <script src="auth.js"></script>
    <script src="history.js"></script>
</body>

</html>